---
layout: post
title:  VScode中配置 C/C++ 环境
author: lazarus
categories: [ 代码入门 ]
tags: [ CodingsStyle ]
---

VScode中配置 C/C++ 环境

转载自 @零流 @火星动力猿 on [bilibili](https://www.bilibili.com/video/BV1Cu411y7vT?share_source=copy_web)

- [1. 下载编辑器VScode](#1. 下载编辑器VScode)
- [2. 下载编译器MinGW并解压](#2. 下载编译器MinGW并解压)
- [3. 将MinGW添加至环境变量](#3. 将MinGW添加至环境变量)
- [4. 配置VScode插件](#4-配置vscode插件)
- [5. 运行代码](#5-运行代码)
- [6. 调整和优化](#6-调整和优化)
- [7. 提示](#7-提示)
- [8. 例行格式条款](#8-例行格式条款)

## 1. 下载编辑器VScode
- 官网：[VSCode 官网](https://code.visualstudio.com/)（点链接时按下Ctrl，不会覆盖当前页面哦^-^）
![下载VSCode](/assets/images/posts/SetVSCode/vscode下载.png)  

- 安装VScode（建议附加任务全部勾选）
![VSCode安装](/assets/images/posts/SetVSCode/vscode安装.gif)  

## 2. 下载编译器MinGW并解压
- 官网页面：[MingW 官网](https://www.mingw-w64.org/)

- 下载页面：[MingW 下载地址](https://sourceforge.net/projects/mingw-w64/files/)

    > 你可以进入官网自行寻找  
      你也可以直接点击为你找好的下载页面

- 下载页面中选择 `x86_64-win32-seh` 下载

![mingw下载](\assets/images/posts/SetVSCode/vscode下载.png)

> 如果你因为网络环境限制无法下载  
  不限速下载，请笑纳^-^：[mingW 网盘下载](https://wwn.lanzouh.com/iLOip031ku6b) 密码:1234


- 在C盘中解压文件  
![解压 mingW](\assets/images/posts/SetVSCode/解压mingw.gif)


> 理论上你可以在任何地方解压，但注意路径不能包含中文，至于特殊字符请自行测试

## 3. 将MinGW添加至环境变量
- 进入mingw64下的bin文件夹，复制当前路径，Win + i唤起系统设置，输入高级系统设置并进入，点击环境变量，选择path，编辑，新建，粘贴路径，按下三个确定

![将 mingW 添加至环境变量](\assets/images/posts/SetVSCode/配置环境变量.gif)

## 4. 配置VScode插件
- 打开VScode安装插件 Chinese 和 C/C++ ，等待安装完毕后重启VScode
![安装 VSCode 插件](\assets/images/posts/SetVSCode/安装插件.gif)

- 切换C/C++插件至 1.8.4 版本
![回退插件版本](\assets/images/posts/SetVSCode/版本退回.png)

> 因最新版本不会自动生成launch.json文件，给后续优化带来不便，故退回旧版本。

## 5. 运行代码
- 新建文件夹，修改为英文名称并进入，右键 通过Code打开 若在安装时未勾选相关选项，可能没有这个选项，请自行在VScode内操作打开文件夹

- 新建一个文件，英文命名且扩展名为 .c 

- 编写相关代码

    ```c
    #include <stdio.h>
    #include <stdlib.h>
    int main()
    {
        printf("Hello World!\n");
        printf("你好世界！\n");
        system("pause");    // 防止运行后自动退出，需头文件stdlib.h
        return 0;
    }
    ```
- VScode菜单栏，点击运行，启动调试，稍等程序运行，输出结果在下方终端，上方调试面板，点击最右边的 橙色方框 停止程序运行
![运行代码](\assets/images/posts/SetVSCode/运行代码.gif)

## 6. 调整和优化
> 请根据自己的需要进行优化  
  代码运行后 .vscode 文件夹会自动生成在你的源文件目录下  
  .vscode 文件夹下的 task.json 和 launch.json 用来控制程序的运行和调试  

- 将程序运行在外部控制台【推荐】

    - 打开.vscode 文件夹下的 launch.json 文件，找到 "externalConsole": false, 将 false 改为 true 并保存
        ![外部控制台](\assets/images/posts/SetVSCode/控制台.png)

- 解决中文乱码问题【推荐】

    - 打开.vscode 文件夹下的 task.json 文件，找到 `${fileDirname}\\${fileBasenameNoExtension}.exe` 在后面加上英文逗号 "," 然后回车到下一行，粘贴下面文本 `-fexec-charset=GBK` 并保存
        ![解决中文乱码](\assets/images/posts/SetVSCode/中文乱码.png)

- 收纳生成的 exe 可执行文件【可选】

    - 打开.vscode 文件夹下的 task.json 文件，找到 `${fileDirname}\\${fileBasenameNoExtension}.exe`

    - 修改成 `${fileDirname}\\coin\\${fileBasenameNoExtension}.exe` 并保存，同理，launch.json 下也有相同的字段，需要你修改

    - 在源文件同目录下新建 `coin` 文件夹，程序运行后，可执行文件将会生成在里面（其中 `coin` 可修改成你喜欢的英文名字）

    > 这样 .c 文件一多起来的时候，就不会出现 .exe 和 .c 相互穿插在目录中^-^
    
    ![收纳 exe](\assets/images/posts/SetVSCode/收纳exe.png)

## 7. 提示
- 若源代码文件夹含有中文路径，将会无法编译程序。
- 若你的Windows用户名使用了中文，可能无法运行。
- 我知道GIF的自动播放，让你不知从何看起，没办法┗( T﹏T )┛
 

 

## 8. 例行格式条款
- 本文以自身分享为主，文中的提到的包括但不限于电脑操作、软件安装、点击链接，作者不保证有效性和可能发生的不利后果。
- 如需转载请在开头注明作者和出处